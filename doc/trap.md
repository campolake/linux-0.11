##中断机制

##中断机制的产生
CPU作为电脑的核心，要用众多的外设进行交互。
如何交互呢，我们最先想到的就是“轮循机制”，CPU定期的去检查一下所有连接的外设，看看有没有需要自己处理的。这种机制实现起来比较简单，但是由于外设运行速度与CPU相比要慢很多，在CPU轮询是大部分没有准备好，浪费了太多的CPU时间，运行效率太低。
于是人们开始冥思苦想，既然外设运行速率低，那么能不能引入一直机制，CPU不直接查询外设呢？比如引入一个设备，让它专门跟外设交互，如果有外设需要处了，这个设备在发送一个信号给CPU“X设备需要你来处理一下”，这个指令放到CPU的一个特殊的地方，CPU在每一条指令执行完毕后检查下这个地方是不是有信号要处理。CPU对这个信号的检测由专门的硬件来实现，可以实现的很高效。这种机制呢就叫“中断”，顾名思义就是中断CPU当前的指令执行，来处理一下外设的信。那个引入的中间设备就是中断处理器，Intel早期的cpu中用8259A芯片来实现。

这个中断处理器不仅仅管理硬件的中断信号，还可以处理由指令INTX触发的软中断，在Linux中跟内核的很多交互都是通过软中断来实现的，那么为什么不用函数调用来实现呢？
1、用户的程序是在用户空间运行的，即CPU运行在用户态，而内核是运行在内核态的，直接函数调用不太好实现用户态到内核态的转变？
2、

## linux中断的实现

	

